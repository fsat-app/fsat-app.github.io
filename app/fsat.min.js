'use strict';(function(){function J(){u.innerHTML='\n\x3cdiv class\x3d"container space-y-3"\x3e\n\x3ch6 id\x3d"greeting" class\x3d"right"\x3e\x3c/h6\x3e\n\x3cdiv class\x3d"space-3"\x3e\n\x3carticle class\x3d"hero justify clamp-6 space-3 rounded" style\x3d"margin:auto;background-color: var(--pico-code-background-color);padding-bottom:0"\x3e\n\x3cp class\x3d"center"\x3e\n\x3cb\x3eThis tool can be used during healthcare consultations to support communication with patients. \x3c/b\x3e\n\x3ca style\x3d"display:inline-block;color:var(--pico-accordion-active-summary-color)" onclick\x3d"Swal.fire(\n\'About\',\n\'\x3cp\x3eWatercolor illustrations may help individuals recognize and describe their own genital anatomy, including different types of female genital mutilation/cutting (FGM/C), as defined by the World Health Organization (WHO).\x3c/p\x3e\n\x3cp\x3eUsing this app in a clinical context also facilitates data aggregation in Excel files, provides direct statistical visualizations, and supports the sharing of these data.\x3c/p\x3e\',\n\'info\')"\x3e\nLearn more \n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"20" height\x3d"20" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"css-i6dzq1"\x3e\x3ccircle cx\x3d"12" cy\x3d"12" r\x3d"10"\x3e\x3c/circle\x3e\x3cpath d\x3d"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"\x3e\x3c/path\x3e\x3cline x1\x3d"12" y1\x3d"17" x2\x3d"12.01" y2\x3d"17"\x3e\x3c/line\x3e\n\x3c/svg\x3e\n\x3c/a\x3e\n\x3c/p\x3e\n\x3cdiv class\x3d"grid center" style\x3d"padding-top:0"\x3e \n\x3carticle style\x3d"box-shadow: none;"\x3e\n\x3cp\x3eManage app installation and data.\x3c/p\x3e\n\x3ca href\x3d"#manage-app" role\x3d"button" style\x3d"display: block;max-width: 17em;margin: auto;"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3ccircle cx\x3d"12" cy\x3d"12" r\x3d"10"\x3e\x3c/circle\x3e\n\x3cpolyline points\x3d"8 12 12 16 16 12"\x3e\x3c/polyline\x3e\n\x3cline x1\x3d"12" y1\x3d"8" x2\x3d"12" y2\x3d"16"\x3e\x3c/line\x3e\n\x3c/svg\x3e\nApp settings\n\x3c/a\x3e\n\x3c/article\x3e\n\x3carticle style\x3d"box-shadow: none;" \x3e\n\x3cp\x3eContribute to research in one click.\x3c/p\x3e\n\x3ca href\x3d"#contribute-research" class\x3d"contrast" role\x3d"button" style\x3d"display: block;max-width: 17em;margin: auto;"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3ccircle cx\x3d"12" cy\x3d"12" r\x3d"10"\x3e\x3c/circle\x3e\n\x3cpolyline points\x3d"8 12 12 16 16 12"\x3e\x3c/polyline\x3e\n\x3cline x1\x3d"12" y1\x3d"8" x2\x3d"12" y2\x3d"16"\x3e\x3c/line\x3e\n\x3c/svg\x3e\nLearn more\n\x3c/a\x3e\n\x3c/article\x3e\n\x3c/div\x3e\n\x3c/article\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"container"\x3e\n\x3cdiv class\x3d"hero center space-3 outline"\x3e\n\x3ch2\x3eStart with a new patient\x3c/h2\x3e\n\x3cdiv class\x3d"grid space-y-2"\x3e\n\x3csection class\x3d"arrow-right space-2"\x3e\n\x3cdiv class\x3d"background-block"\x3e\n\x3csup\x3e1\x3c/sup\x3e\x3cbr\x3e\n\x3csmall\x3eDisplay the watercolor gallery to the patient\x3c/small\x3e\n\x3c/div\x3e\n\x3c/section\x3e\n\x3csection class\x3d"arrow-right space-2"\x3e\n\x3cdiv class\x3d"background-block"\x3e\n\x3csup\x3e2\x3c/sup\x3e\x3cbr\x3e\n\x3csmall\x3eComplete information about the patient\x3c/small\x3e\n\x3c/div\x3e\n\x3c/section\x3e\n\x3csection class\x3d"space-2"\x3e\n\x3cdiv class\x3d"background-block"\x3e\n\x3csup\x3e3\x3c/sup\x3e\x3cbr\x3e\n\x3csmall\x3eSave and retrieve information later\x3c/small\x3e\n\x3c/div\x3e\n\x3c/section\x3e\n\x3c/div\x3e\n\x3cbutton id\x3d"create-user-btn"\x3e\n\x3cspan\x3eNew session\x3c/span\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpath d\x3d"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"\x3e\x3c/path\x3e\n\x3ccircle cx\x3d"8.5" cy\x3d"7" r\x3d"4"\x3e\x3c/circle\x3e\n\x3cpolyline points\x3d"17 11 19 13 23 9"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\n\x3c/button\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"plain-section"\x3e\n\x3cdiv class\x3d"container space-y-3"\x3e\n\x3cdiv class\x3d"center hero" data-aos\x3d"zoom-in"\x3e\n\x3ch1\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"48" height\x3d"48" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cellipse cx\x3d"12" cy\x3d"5" rx\x3d"9" ry\x3d"3"\x3e\x3c/ellipse\x3e\n\x3cpath d\x3d"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"\x3e\x3c/path\x3e\n\x3cpath d\x3d"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"\x3e\x3c/path\x3e\n\x3c/svg\x3e\nExplore Your Data\n\x3c/h1\x3e\n\x3chr\x3e\n\x3c/div\x3e\n\x3ccanvas id\x3d"fsat-data"\x3e\x3c/canvas\x3e\n\x3ch2\x3eList of patients registered on this local device\x3c/h2\x3e\n\x3cp\x3e\nPatient information is stored locally on this device and is accessible through this application,\neven without an internet connection.\n\x3c/p\x3e\n\x3cdetails id\x3d"user-list" class\x3d"space-y-2"\x3e\n\x3csummary\x3e\x3ca role\x3d"button" class\x3d"outline"\x3eDisplay list of patients\x3c/a\x3e\x3c/summary\x3e\n\x3c/details\x3e\n\x3ctable id\x3d"user-export-list" style\x3d"display:none;"\x3e \x3cthead\x3e \x3ctr\x3e \x3cth\x3eComposed ID\x3c/th\x3e \x3cth\x3eBirth Date\x3c/th\x3e \x3cth\x3eAge\x3c/th\x3e \x3cth\x3eFGM Patient Type\x3c/th\x3e \x3cth\x3eAge at FGM/C\x3c/th\x3e \x3cth\x3eFGM Professional Type\x3c/th\x3e \x3cth\x3eCountry of Origin\x3c/th\x3e \x3cth\x3eReligion\x3c/th\x3e \x3cth\x3eMarital Status\x3c/th\x3e \x3cth\x3eViolence History\x3c/th\x3e \x3cth\x3ePsychological Support\x3c/th\x3e \x3cth\x3eDefibulation History\x3c/th\x3e \x3cth\x3eReconstructive Surgery History\x3c/th\x3e \x3cth\x3eNumber of Deliveries\x3c/th\x3e \x3cth\x3eMenopause\x3c/th\x3e \x3cth\x3eCreated At\x3c/th\x3e \x3cth\x3eData share consent\x3c/th\x3e \x3c/tr\x3e \x3c/thead\x3e \x3ctbody\x3e\x3c/tbody\x3e \x3c/table\x3e\n\x3cdiv class\x3d"grid clamp-4"\x3e\n\x3cbutton id\x3d"csv-btn" class\x3d"contrast"\x3eDownload to .csv\x3c/button\x3e\n\x3cbutton id\x3d"excel-btn" class\x3d"contrast"\x3eDownload to .xlsx\x3c/button\x3e\n\x3c/div\x3e\n\x3cp\x3e\nExported data are pseudonymized \u2014\n\x3ca href\x3d"#" onclick\x3d"Swal.fire(\n\'Pseudonymization\',\n\'\x3cp\x3ePseudonymization replaces direct identifiers with a code, reducing privacy risks and complying with GDPR.\x3c/p\x3e\',\n\'info\'\n)"\x3e\nWhat does this mean?\n\x3c/a\x3e\n\x3c/p\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"container space-yb-3"\x3e\n\x3cdiv id\x3d"contribute-research" class\x3d"center hero" data-aos\x3d"zoom-in"\x3e\n\x3ch1\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"48" height\x3d"48" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpolyline points\x3d"22 12 18 12 15 21 9 3 6 12 2 12"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\nContribute to research\n\x3c/h1\x3e\n\x3chr\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid space-yb-3"\x3e\n\x3cdiv class\x3d"space-3 center"\x3e\n\x3cimg src\x3d"img/graphics/body-fig-3.png"\nalt\x3d"Anatomical watercolor illustration"\nstyle\x3d"max-width:320px;"\x3e\n\x3c/div\x3e\n\x3cdiv data-aos\x3d"zoom-in" class\x3d"space-3"\x3e\n\x3ch4\x3e\nWould you like to contribute to advancing knowledge on Female Genital Mutilation/Cutting?\n\x3c/h4\x3e\n\x3cp\x3e\nYou can securely share your data with the research team led by Prof. Jasmine Abdulcadir\nat the University of Geneva (Switzerland).\n\x3c/p\x3e\n\x3cbutton id\x3d"sync-btn" class\x3d"secondary"\x3e\nSynchronize\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none"\nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpolyline points\x3d"16 16 12 12 8 16"\x3e\x3c/polyline\x3e\n\x3cline x1\x3d"12" y1\x3d"12" x2\x3d"12" y2\x3d"21"\x3e\x3c/line\x3e\n\x3cpath d\x3d"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"\x3e\x3c/path\x3e\n\x3c/svg\x3e\n\x3c/button\x3e\n\x3chr\x3e\n\x3csmall\x3e\nAll transmitted data are anonymized. First name, last name, and email address are excluded.\nOnly records for which explicit consent has been provided will be transmitted.\n\x3c/small\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid space-yb-3"\x3e\n\x3cdiv class\x3d"space-3 center" style\x3d"filter: invert(0.5) sepia(1) hue-rotate(84deg);"\x3e\n\x3cimg class\x3d"space-3" src\x3d"img/logos/fmed-white.png"\nalt\x3d"Anatomical watercolor illustration"\nstyle\x3d"max-width:250px;"\x3e\n\x3cimg class\x3d"space-3" src\x3d"img/logos/hug-white.png"\nalt\x3d"Anatomical watercolor illustration"\nstyle\x3d"max-width:250px;"\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"space-3"\x3e\n\x3ch4\x3e\x3cmark\x3eContact us\x3c/mark\x3e\x3c/h4\x3e\n\x3cp\x3e\nIf you want to collaborate or send data through email, you can write at \x3ca href\x3d"mailto:jasmine.Abdulcadir@hug.ch"\x3ejasmine.Abdulcadir@hug.ch\x3c/a\x3e.\n\x3c/p\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"plain-section"\x3e\n\x3cdiv class\x3d"container space-y-3"\x3e\n\x3cdiv class\x3d"center hero" id\x3d"manage-app" data-aos\x3d"zoom-in"\x3e\n\x3ch1\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"48" height\x3d"48" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" \nstroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3ccircle cx\x3d"12" cy\x3d"12" r\x3d"3"\x3e\x3c/circle\x3e\n\x3cpath d\x3d"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"\x3e\n\x3c/path\x3e\n\x3c/svg\x3e\nApp management\n\x3c/h1\x3e\n\x3chr\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3carticle\x3e\n\x3ch3\x3eInstall FSAT\x3c/h3\x3e\n\x3cp\x3eOn smartphones and tablets, this tool can be installed as an application that works both online and offline.\x3c/p\x3e\n\x3cbutton id\x3d"install-fsat"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpolyline points\x3d"22 12 18 12 15 21 9 3 6 12 2 12"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\nInstall application\n\x3c/button\x3e\n\x3c/article\x3e\n\x3carticle\x3e\n\x3ch3\x3eDelete My Data\x3c/h3\x3e\n\x3cp\x3eYour account and patient data are stored locally on this device. If you wish to reset your account and permanently remove all patient data from this device, you can do so below.\x3c/p\x3e\n\x3cbutton id\x3d"delete-fsat" style\x3d"background:tomato"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" \nstroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"css-i6dzq1"\x3e\n\x3cpolyline points\x3d"3 6 5 6 21 6"\x3e\x3c/polyline\x3e\n\x3cpath d\x3d"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"\x3e\x3c/path\x3e\n\x3cline x1\x3d"10" y1\x3d"11" x2\x3d"10" y2\x3d"17"\x3e\x3c/line\x3e\n\x3cline x1\x3d"14" y1\x3d"11" x2\x3d"14" y2\x3d"17"\x3e\x3c/line\x3e\n\x3c/svg\x3e\nDelete My Account\n\x3c/button\x3e\n\x3c/article\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n';u.classList.remove("inactive");document.body.classList.add("fade-white");u.querySelector("#install-fsat").addEventListener("click",ja);u.querySelector("#delete-fsat").addEventListener("click",ka);u.querySelector("#create-user-btn").addEventListener("click",la);u.querySelector("#sync-btn").addEventListener("click",ma);u.querySelector("#csv-btn").addEventListener("click",na);u.querySelector("#excel-btn").addEventListener("click",oa);E=pa();AOS.refreshHard()}function S(a=!1){x.innerHTML='\n\x3cdiv id\x3d"patient-info" class\x3d"container hero space-yt-3"\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3csection class\x3d"space-x-3 hero clamp-4"\ndata-aos\x3d"fade-left"\ndata-aos-mirror\x3d"true"\ndata-aos-delay\x3d"100"\x3e\n\x3cp class\x3d"space-yt-3"\x3e\nThe gallery below is for women and other individuals who wish to learn more about genital anatomy\nand the different types of FGM/C.\n\x3cbr\x3e\x3cbr\x3e\n\x3cmark\x3e\nIt does not give a medical diagnosis and does not replace care from a trained healthcare professional.\n\x3c/mark\x3e\n\x3cbr\x3e\x3cbr\x3e\nIf you have questions, concerns, or health needs, you are encouraged to seek care from a qualified\nand trusted healthcare provider.\n\x3c/p\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cbutton class\x3d"outline" id\x3d"purpose-btn"\x3e\nGallery\u2019s purpose\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor"\nstroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpolyline points\x3d"9 18 15 12 9 6"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\n\x3c/button\x3e\n\x3cbutton class\x3d"outline secondary" id\x3d"illustrations-btn"\x3e\nAbout illustrations\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor"\nstroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cpolyline points\x3d"9 18 15 12 9 6"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\n\x3c/button\x3e\n\x3c/div\x3e\n\x3c/section\x3e\n\x3csection class\x3d"right space-yt-3 clamp-4 hero"\ndata-aos\x3d"fade-right"\ndata-aos-mirror\x3d"true"\ndata-aos-delay\x3d"100"\x3e\n\n\x3cimg src\x3d"img/graphics/body-fig-3.png"\nalt\x3d"Watercolor anatomical illustration"\nstyle\x3d"max-width:320px;"\x3e\n\x3c/section\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"center"\x3e\n\x3ca href\x3d"#patient-gallery" aria-label\x3d"Scroll to gallery"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"64" height\x3d"64" stroke\x3d"currentColor"\nstroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round"\nstroke-linejoin\x3d"round" class\x3d"float"\x3e\n\x3cpolyline points\x3d"6 9 12 15 18 9"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\n\x3c/a\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"patient-gallery" class\x3d"plain-section space-yt-1"\x3e\n\x3cdiv class\x3d"container" style\x3d"position:relative;"\x3e\n\x3cdiv class\x3d"center"\x3e\n\x3ca id\x3d"cancel-gallery"\nrole\x3d"button"\nclass\x3d"outline contrast"\nhref\x3d"#patient-info"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor"\nstroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n\x3cline x1\x3d"19" y1\x3d"12" x2\x3d"5" y2\x3d"12"\x3e\x3c/line\x3e\n\x3cpolyline points\x3d"12 19 5 12 12 5"\x3e\x3c/polyline\x3e\n\x3c/svg\x3e\nExit Gallery \n\x3c/a\x3e\n\x3c/div\x3e\n\x3cp class\x3d"center"\x3e\n\x3csmall\x3e\nClick on any illustration below to enlarge it and access further information.\n\x3c/small\x3e\n\x3c/p\x3e\n\x3cdiv class\x3d"grid center"\x3e\n\n\x3ca data-aos\x3d"flip-left" data-type\x3d"No scar" data-text\x3d"No cutting" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/NM1.jpg" alt\x3d"No visible scar" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"Ia"\ndata-text\x3d"Cutting of the clitoral prepuce/hood" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/1A.jpg" alt\x3d"FGM Type Ia" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"Ib"\ndata-text\x3d"Partial or total cutting of the clitoral glans together with the clitoral hood" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/1B.jpg" alt\x3d"FGM Type Ib" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\n\x3ca data-aos\x3d"flip-left" data-type\x3d"IIa"\ndata-text\x3d"Cutting of the inner labia (prepuce maybe affected)" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/2A.jpg" alt\x3d"FGM Type IIa" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid center"\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"IIb"\ndata-text\x3d"Partial or total cutting of the clitoral glans and cutting of the inner labia(prepuce maybe affected)" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/2B.jpg" alt\x3d"FGM Type IIb" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"IIc"\ndata-text\x3d"Partial or total cutting of the clitoral glans, cutting of the inner labia, and excision of the outer labia" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/2C.jpg" alt\x3d"FGM Type IIc" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"IIIb"\ndata-text\x3d"Cutting and apposition of the outer labia. The clitoris may be cut on uncut below the scar. " class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/3B.jpg" alt\x3d"FGM Type IIIb" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca data-aos\x3d"flip-left" data-type\x3d"Unknown" data-text\x3d"I do not know" class\x3d"watercolor-thumb"\x3e\n\x3carticle\x3e\n\x3cimg src\x3d"img/gallery/unknown.jpg" alt\x3d"Unknown FGM type" oncontextmenu\x3d"return false;"\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n';x.classList.remove("inactive");document.body.classList.add("fade-white");x.querySelector("#purpose-btn").addEventListener("click",qa);x.querySelector("#illustrations-btn").addEventListener("click",ra);x.querySelector("#cancel-gallery").addEventListener("click",c=>{a===!0?(J(),Z()):window.location.reload()});a===!1&&sa();AOS.refreshHard()}function Z(){x.innerHTML="";x.classList.add("inactive");document.body.classList.remove("fade-white")}async function F(a){a=(new TextEncoder).encode(a);a=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(a)).map(c=>c.toString(16).padStart(2,"0")).join("")}async function aa(a,c=!1,e=!1){try{var b=await fetch("asset/countries-ISO-3166.json");if(!b.ok)throw Error("Failed to load countries.json");const g=await b.json(),f=document.getElementById(a);f.innerHTML='\x3coption value\x3d""\x3eOriginal country\x3c/option\x3e';b=[];if(Array.isArray(g))b=g.map(h=>[h["alpha-2"]||h.alpha2||h.code||"",h.name||h.name||""]).filter(([,h])=>h);else if(typeof g==="object"&&g!==null)b=Object.entries(g);else throw Error("Unexpected countries.json format");const l="SO GN DJ EG ML SD SL ER BF GM MR LR TD ET KE NG SN CF CI GH TG BJ CM NE UG TZ YE ID IQ".split(" ");e?b.sort((h,k)=>{const n=l.includes(h[0])?0:1,q=l.includes(k[0])?0:1;return n-q||h[1].localeCompare(k[1])}):b.sort((h,k)=>h[1].localeCompare(k[1]));b.forEach(([,h])=>{const k=document.createElement("option");k.value=h;k.textContent=h;f.appendChild(k)});c&&["Other","Unknown"].forEach(h=>{const k=document.createElement("option");k.value=h;k.textContent=h;f.appendChild(k)})}catch(g){console.error("Error loading countries:",g),document.getElementById(a).innerHTML='\x3coption value\x3d""\x3eError loading countries\x3c/option\x3e'}}async function ta(a,c,e,b,g){try{const f=`${a.toLowerCase().trim()}|${c.toLowerCase().trim()}|${e}|${b.toLowerCase().trim()}|${g}`,l=new TextEncoder,h=await crypto.subtle.digest("SHA-256",l.encode(f));return Array.from(new Uint8Array(h)).map(k=>k.toString(16).padStart(2,"0")).join("").slice(0,16)}catch(f){throw console.error("Error in generateComposedId:",f),f;}}async function K(){try{const c=await p.clinician.get(1);if(c){var a=await ba()?"online":"offline";document.getElementById("greeting").innerHTML=`Welcome ${c.firstName} <br> <small>Network status : <b>${a}</b></small>`}}catch(c){console.error("Error updating greeting:",c)}}async function ua(){try{const e=await p.clinician.get(1);if(e){const {value:b,isDismissed:g}=await Swal.fire({title:"Enter your password",input:"password",text:"You will have access to your private local space. The password is encrypted and is not transmitted online.",inputPlaceholder:"Password",inputAttributes:{autocapitalize:"off",autocorrect:"off"},allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"LOGIN",cancelButtonText:"CANCEL",footer:'\x3ca href\x3d"#" class\x3d"contrast" id\x3d"forgot-password"\x3eForgot password ?\x3c/a\x3e',didOpen:()=>{Swal.getPopup().classList.add("clinician");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");Swal.getPopup().querySelector("#forgot-password").addEventListener("click",async f=>{f.preventDefault();Swal.close();await va()})},preConfirm:async f=>f?await F(f)!==e.passwordHash?(Swal.showValidationMessage("Incorrect password"),!1):f:(Swal.showValidationMessage("Password is required"),!1)});!g&&b&&(document.getElementById("start-view").style.display="none",J(),await K(),await G())}else if((await Swal.fire({html:'\x3cdiv id\x3d"terms-of-use" style\x3d"Display:none;overflow-y:scroll;max-height:65vh"\x3e\n\x3ch1 class\x3d"center" id\x3d"terms-of-use"\x3eTerms of use\x3c/h1\x3e\n\x3chr\x3e\n\x3cdiv class\x3d"left" style\x3d"font-size:75%"\x3e\n\x3ch4\x3e1. Purpose of the Application\x3c/h4\x3e\n\x3cp\x3e\nThe tool is intended solely for information and self-assessment purposes. It does not provide a medical diagnosis and must not replace consultation with qualified healthcare professionals. Users are encouraged to seek appropriate medical advice for any health-related question or concern.\n\x3c/p\x3e\n\x3ch4\x3e2. Data Processing and Privacy\x3c/h4\x3e\n\x3cp\x3eAll data entered in the application are:\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3estored locally in the user\u2019s browser,\x3c/li\x3e\n\x3cli\x3enot transmitted to any external server without the user\u2019s explicit consent,\x3c/li\x3e\n\x3cli\x3eexportable by the user in CSV or Excel format with anonymous identifiers.\x3c/li\x3e\n\x3c/ul\x3e\n\x3cp\x3e\nData are only sent online to the university server if the user actively chooses to share their anonymised data for academic and research purposes. No identifiable personal information is collected by default.\n\x3c/p\x3e\n\x3ch4\x3e3. User Responsibilities\x3c/h4\x3e\n\x3cp\x3eUsers agree to:\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3euse the application in compliance with all applicable laws and ethical standards,\x3c/li\x3e\n\x3cli\x3erefrain from uploading or entering any identifying personal data,\x3c/li\x3e\n\x3cli\x3eunderstand the limitations of self-assessment and the necessity of professional medical evaluation.\x3c/li\x3e\n\x3c/ul\x3e\n\x3ch4\x3e4. Intellectual Property\x3c/h4\x3e\n\x3cp\x3e\nAll illustrations, interface components, and written content within the application are protected by copyright. Reproduction, distribution, or reuse of the artwork or other materials is prohibited without prior authorisation from the copyright holders.\n\x3c/p\x3e\n\x3ch4\x3e5. Disclaimer of Liability\x3c/h4\x3e\n\x3cp\x3e\nThe application is provided \u201cas is,\u201d without warranty of any kind. The developers, contributors, and affiliated institutions shall not be held responsible for:\n\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3eerrors or inaccuracies in the content,\x3c/li\x3e\n\x3cli\x3edecisions made based on information displayed in the application,\x3c/li\x3e\n\x3cli\x3eany technical issues or data loss resulting from the user\u2019s device or browser environment.\x3c/li\x3e\n\x3c/ul\x3e\n\x3ch4\x3e6. Updates and Modifications\x3c/h4\x3e\n\x3cp\x3e\nThe development team may update, modify, or discontinue features of the application at any time in order to improve its performance, ensure compliance, or enhance the user experience.\n\x3c/p\x3e\n\x3ch4\x3e7. Acceptance of Terms\x3c/h4\x3e\n\x3cp\x3e\nBy using this application, the user acknowledges having read, understood, and accepted these Terms of Use. Continued use of the application constitutes acceptance of any future updates to these terms.\n\x3c/p\x3e\n\x3c/div\x3e\n\x3c/div\x3e',showCancelButton:!0,confirmButtonText:"I accept terms of use",cancelButtonText:"I do not accept",allowOutsideClick:!1,didOpen:()=>{Swal.getPopup().classList.add("clinician");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");Swal.getPopup().querySelector("#terms-of-use").style.display="block"}})).isConfirmed){var {value:a,isDismissed:c}=await Swal.fire({allowOutsideClick:!1,confirmButtonText:"Create profile",showCancelButton:!0,cancelButtonText:"Cancel",html:'\x3chgroup class\x3d"space-yb-2 center"\x3e\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"thumb-2 space-1"\x3e\x3cpolyline points\x3d"22 12 18 12 15 21 9 3 6 12 2 12"\x3e\x3c/polyline\x3e\x3c/svg\x3e\x3ch1\x3eCreate \x3cspan class\x3d"no-phone"\x3eyour\x3c/span\x3e profile\x3c/h1\x3e\x3cp\x3eYou will create a local profile. Your data is stored locally in this browser and transmitted online only with your consent.\x3c/p\x3e\x3c/hgroup\x3e\x3cform\x3e\x3cdiv class\x3d"grid"\x3e\x3cinput id\x3d"swal-firstName" placeholder\x3d"First name" required\x3e\x3cinput id\x3d"swal-lastName" placeholder\x3d"Last name" required\x3e\x3c/div\x3e\x3cdiv class\x3d"grid"\x3e\x3cinput id\x3d"swal-age" type\x3d"number" placeholder\x3d"Age" required\x3e\x3cselect id\x3d"swal-country" required\x3e\x3c/select\x3e\x3c/div\x3e\x3cdiv class\x3d"grid"\x3e\x3cselect id\x3d"swal-profession" required\x3e\x3coption value\x3d""\x3eSelect profession\x3c/option\x3e\x3coption value\x3d"General practitioner"\x3eGeneral practitioner\x3c/option\x3e\x3coption value\x3d"Obstetrician-gynecologist"\x3eObstetrician-gynecologist\x3c/option\x3e\x3coption value\x3d"Pediatrician"\x3ePediatrician\x3c/option\x3e\x3coption value\x3d"Nurse"\x3eNurse\x3c/option\x3e\x3coption value\x3d"Midwife"\x3eMidwife\x3c/option\x3e\x3coption value\x3d"Sexologist"\x3eSexologist\x3c/option\x3e\x3coption value\x3d"Social worker"\x3eSocial worker\x3c/option\x3e\x3coption value\x3d"Other health professional"\x3eOther health professional\x3c/option\x3e\x3coption value\x3d"Other"\x3eOther\x3c/option\x3e\x3c/select\x3e\x3cinput id\x3d"swal-institution" placeholder\x3d"Institution" required\x3e\x3c/div\x3e\x3chr\x3e\x3cdiv class\x3d"grid"\x3e\x3cinput id\x3d"swal-email" type\x3d"email" placeholder\x3d"Email address" required\x3e\x3cinput id\x3d"swal-password" type\x3d"password" placeholder\x3d"Password" required autocomplete\x3d"new-password"\x3e\x3c/div\x3e\x3c/form\x3e',focusConfirm:!1,didOpen:()=>{Swal.getPopup().classList.add("watercolor-ing","clinician");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");aa("swal-country")},preConfirm:async()=>{const b=document.getElementById("swal-firstName").value,g=document.getElementById("swal-lastName").value;let f=document.getElementById("swal-profession").value;const l=document.getElementById("swal-age").value,h=document.getElementById("swal-institution").value,k=document.getElementById("swal-country").value,n=document.getElementById("swal-email").value;var q=document.getElementById("swal-password").value;if(!(b&&g&&f&&l&&h&&k&&n&&q))return Swal.showValidationMessage("All fields are required"),!1;q=await F(q);return{firstName:b,lastName:g,profession:f,age:l,institution:h,country:k,email:n,passwordHash:q}}});if(c)Swal.fire({title:"Cancelled",html:"\x3cp style\x3d'color:white'\x3eProfile creation cancelled.\x3c/p\x3e",didOpen:()=>{Swal.getPopup().classList.add("swal-hug-popup")}});else if(a){const b=await Swal.fire({title:"Set Security Question",html:'\n\x3cp\x3eChoose and answer one security question to reset your password if needed. Your answer is securely encrypted.\x3c/p\x3e\n\x3cselect id\x3d"swal-securityQuestion" required\x3e\n\x3coption value\x3d""\x3eSelect a security question\x3c/option\x3e\n\x3coption value\x3d"1"\x3eWhat is your mother\'s maiden name?\x3c/option\x3e\n\x3coption value\x3d"2"\x3eWhat is the name of your first pet?\x3c/option\x3e\n\x3coption value\x3d"3"\x3eIn what city were you born?\x3c/option\x3e\n\x3c/select\x3e\n\x3cinput id\x3d"swal-securityAnswer" placeholder\x3d"Answer" required\x3e\n',confirmButtonText:"Save",showCancelButton:!0,cancelButtonText:"Cancel",allowOutsideClick:!1,didOpen:()=>{Swal.getPopup().classList.add("clinician");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast")},preConfirm:async()=>{const g=document.getElementById("swal-securityQuestion").value;var f=document.getElementById("swal-securityAnswer").value;if(!g||!f)return Swal.showValidationMessage("Both fields are required"),!1;f=await F(f);return{securityType:g,securityHash:f}}});b.isDismissed?Swal.fire({title:"Cancelled",html:"\x3cp style\x3d'color:white'\x3eProfile creation cancelled.\x3c/p\x3e",didOpen:()=>{Swal.getPopup().classList.add("swal-hug-popup")}}):b.value&&(Object.assign(a,b.value),await p.clinician.add({id:1,...a}),await p.config.put({key:"sync",value:"38QQVOLQAE0DaCX9BIWIrcbwiqcOfCq9onI0RmFN5Gi1sPYk"}),document.getElementById("start-view").style.display="none",J(),await K(),await G())}}}catch(e){console.error("Error in checkClinicianProfile:",e),Swal.fire("Error","An error occurred while checking/creating the clinician profile.","error")}}function wa(a){switch(Number(a)){case 1:return"What is your mother's maiden name?";case 2:return"What is the name of your first pet?";case 3:return"In what city were you born?";default:return"Unknown security question."}}async function va(){try{const e=await p.clinician.get(1);if(e&&e.securityType&&e.securityHash){var {value:a}=await Swal.fire({title:"Password Recovery 1/2",html:'\n\x3cinput id\x3d"swal-email" type\x3d"email" placeholder\x3d"Email address" required\x3e\n\x3cselect id\x3d"swal-profession" required\x3e\n\x3coption value\x3d""\x3eSelect profession\x3c/option\x3e\n\x3coption value\x3d"General practitioner"\x3eGeneral practitioner\x3c/option\x3e\n\x3coption value\x3d"Obstetrician-gynecologist"\x3eObstetrician-gynecologist\x3c/option\x3e\n\x3coption value\x3d"Pediatrician"\x3ePediatrician\x3c/option\x3e\n\x3coption value\x3d"Nurse"\x3eNurse\x3c/option\x3e\n\x3coption value\x3d"Midwife"\x3eMidwife\x3c/option\x3e\n\x3coption value\x3d"Sexologist"\x3eSexologist\x3c/option\x3e\n\x3coption value\x3d"Social worker"\x3eSocial worker\x3c/option\x3e\n\x3coption value\x3d"Other health professional"\x3eOther health professional\x3c/option\x3e\n\x3coption value\x3d"Other"\x3eOther\x3c/option\x3e\n\x3c/select\x3e\n',confirmButtonText:"Next",showCancelButton:!0,preConfirm:()=>{const b=document.getElementById("swal-email").value,g=document.getElementById("swal-profession").value;return b&&g?b!==e.email||g!==e.profession?(Swal.showValidationMessage("Incorrect email or profession"),!1):{email:b,profession:g}:(Swal.showValidationMessage("Both fields are required"),!1)}});if(a){var {value:c}=await Swal.fire({title:"Password Recovery 2/2",html:`<p>${wa(e.securityType)}</p><input id="swal-securityAnswer" placeholder="Answer" required>`,confirmButtonText:"Verify",showCancelButton:!0,preConfirm:async()=>{const b=document.getElementById("swal-securityAnswer").value;return b?await F(b)!==e.securityHash?(Swal.showValidationMessage("Incorrect answer"),!1):b:(Swal.showValidationMessage("Answer is required"),!1)}});c&&await Swal.fire({title:"Set new password",html:'\n\x3cinput id\x3d"swal-newPassword" type\x3d"password" placeholder\x3d"New password" required\x3e\n\x3cinput id\x3d"swal-confirmPassword" type\x3d"password" placeholder\x3d"Confirm new password" required\x3e\n',confirmButtonText:"Update Password",showCancelButton:!0,preConfirm:async()=>{var b=document.getElementById("swal-newPassword").value;const g=document.getElementById("swal-confirmPassword").value;if(!b||!g)return Swal.showValidationMessage("Both fields are required"),!1;if(b!==g)return Swal.showValidationMessage("Passwords do not match"),!1;b=await F(b);await p.clinician.update(1,{passwordHash:b});Swal.fire("Success","Password updated successfully. Please login with the new password.","success")}})}}else Swal.fire("Error","No security question set for this account.","error")}catch(e){console.error("Error in handleForgotPassword:",e),Swal.fire("Error","An error occurred during password recovery.","error")}}async function G(){try{const a=await p.users.toArray(),c=document.getElementById("user-list");for(;c.children.length>1;)c.removeChild(c.lastElementChild);const e=document.querySelector("#user-export-list tbody");e.innerHTML="";a.forEach(b=>{if(!b.deleted){const f=Math.floor((new Date-new Date(b.birthDate))/315576E5);var g=[];b.violenceHistory&&g.push(`Violence (${b.violenceHistory})`);b.psychologicalSupport==="Yes"&&g.push("Psych. Support");b.defibulationHistory&&g.push(`Defibulation (${b.defibulationHistory})`);b.reconstructiveSurgeryHistory==="Yes"&&g.push("Reconst. Surgery");g=g.length>0?`Hist: ${g.join(", ")}`:"";const l=`Deliveries: ${b.numDeliveries||0}`,h=b.menopause==="Yes"?"Menopause: Yes":"",k=document.createElement("div");k.classList.add("user-entry");k.innerHTML=`<span><b>${b.firstName} ${b.lastName} [id: ${b.composedId}]</b><br> Age: ${f}- FGM: ${b.fgmPatientType}/${b.fgmProfessionalType} at Age ${b.ageAtFgm||"N/A"}- Origin: ${b.countryOrigin}- ${l}${h?`- ${h}`:""}${g?`- ${g}`:""}${b.maritalStatus?`- Marital: ${b.maritalStatus}`:""}${b.religion?`- Religion: ${b.religion}`:""}${`| Sharing data consent: ${b.consentToSync===0?"No":"Yes"}`} </span><button class="contrast delete-user-btn" data-userid="${b.id}">Delete</button>`;c.appendChild(k);document.querySelectorAll(".delete-user-btn").forEach(n=>n.addEventListener("click",q=>{xa(q.target.dataset.userid)}));g=document.createElement("tr");g.innerHTML=`<td>${b.composedId}</td><td>${b.birthDate}</td><td>${f}</td><td>${b.fgmPatientType}</td><td>${b.ageAtFgm||""}</td><td>${b.fgmProfessionalType}</td><td>${b.countryOrigin}</td><td>${b.religion||""}</td><td>${b.maritalStatus||""}</td><td>${b.violenceHistory||""}</td><td>${b.psychologicalSupport||""}</td><td>${b.defibulationHistory||""}</td><td>${b.reconstructiveSurgeryHistory||""}</td><td>${b.numDeliveries||""}</td><td>${b.menopause||""}</td><td>${b.createdAt}</td><td>${b.consentToSync}</td>`;e.appendChild(g)}})}catch(a){console.error("Error in loadUserList:",a)}}async function ya(a="",c=0){try{const {value:e}=await Swal.fire({allowOutsideClick:!1,confirmButtonText:"Create Patient",showCancelButton:!0,html:'\n\x3cform class\x3d"left"\x3e\n\x3chgroup class\x3d"center space-yb-1"\x3e\n\x3ch2\x3e Complete \x3cspan class\x3d"no-phone"\x3epatient information\x3c/span\x3e\x3c/h2\x3e\n\x3c/hgroup\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cdiv\x3e\n\x3ch4 class\x3d"surtitle space-1"\x3e Patient\u2019s self reported cutting\x3c/h4\x3e\n\x3cselect id\x3d"swal-fgmPatientType" disabled\x3e\n\x3coption value\x3d""\x3eType of FGM/C\x3c/option\x3e\n\x3coption value\x3d"Ia"\x3eType Ia\x3c/option\x3e\n\x3coption value\x3d"Ib"\x3eType Ib\x3c/option\x3e\n\x3coption value\x3d"IIa"\x3eType IIa\x3c/option\x3e\n\x3coption value\x3d"IIb"\x3eType IIb\x3c/option\x3e\n\x3coption value\x3d"IIc"\x3eType IIc\x3c/option\x3e\n\x3coption value\x3d"IIIb"\x3eType IIIb\x3c/option\x3e\n\x3coption value\x3d"No scar"\x3eNo visible scar\x3c/option\x3e\n\x3coption value\x3d"Unknown"\x3eUnknown\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n\x3cdiv\x3e\n\x3ch4 class\x3d"surtitle space-1"\x3e FGM/C observed by the health professional\x3c/h4\x3e\n\x3cselect id\x3d"swal-fgmProfessionalType" autofocus required\x3e\n\x3coption value\x3d""\x3eType of FGM/C\x3c/option\x3e\n\x3coption value\x3d"Ia"\x3eType Ia\x3c/option\x3e\n\x3coption value\x3d"Ib"\x3eType Ib\x3c/option\x3e\n\x3coption value\x3d"IIa"\x3eType IIa\x3c/option\x3e\n\x3coption value\x3d"IIb"\x3eType IIb\x3c/option\x3e\n\x3coption value\x3d"IIc"\x3eType IIc\x3c/option\x3e\n\x3coption value\x3d"IIIa"\x3eType IIIa\x3c/option\x3e\n\x3coption value\x3d"IIIb"\x3eType IIIb\x3c/option\x3e\n\x3coption value\x3d"IV"\x3eType IV\x3c/option\x3e\n\x3coption value\x3d"No scar"\x3eNo visible scar\x3c/option\x3e\n\x3coption value\x3d"Unknown"\x3eUnknown\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3chr\x3e\n\x3ch4 class\x3d"surtitle space-1"\x3eRequired patient information\x3c/h4\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cinput id\x3d"swal-firstName" placeholder\x3d"First name" required\x3e\n\x3cinput id\x3d"swal-lastName" placeholder\x3d"Last name" required\x3e\n\x3cinput id\x3d"swal-birthDate" type\x3d"date" placeholder\x3d"Birth date" required\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cdiv\x3e\n\x3cinput id\x3d"swal-ageAtFgm" type\x3d"number" placeholder\x3d"Age at FGM/C" value\x3d"" data-tooltip\x3d"Let blank if unknown" data-placement\x3d"Bottom"\x3e\n\x3clabel style\x3d"display: block;margin-top: -0.5em;font-size: 0.8em;"\x3e\n\x3cinput type\x3d"checkbox" id\x3d"swal-dontKnowAge"\x3e Age at Fgm/c unknown\n\x3c/label\x3e\n\x3c/div\x3e\n\x3cdiv\x3e\n\x3cselect id\x3d"swal-countryOrigin" required\x3e\x3c/select\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3chr\x3e\n\x3ch4 class\x3d"surtitle space-1"\x3eDetails\x3c/h4\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cselect id\x3d"swal-religion" \x3e\n\x3coption value\x3d""\x3eReligion\x3c/option\x3e\n\x3coption value\x3d"Christianity"\x3eChristianity\x3c/option\x3e\n\x3coption value\x3d"Islam"\x3eIslam\x3c/option\x3e\n\x3coption value\x3d"Judaism"\x3eJudaism\x3c/option\x3e\n\x3coption value\x3d"Buddhism"\x3eBuddhism\x3c/option\x3e\n\x3coption value\x3d"Sikhism"\x3eSikhism\x3c/option\x3e\n\x3coption value\x3d"Other"\x3eOther religion\x3c/option\x3e\n\x3coption value\x3d"None"\x3eNo religion\x3c/option\x3e\n\x3coption value\x3d"Undisclosed"\x3ePrefer not to say\x3c/option\x3e\n\x3c/select\x3e\n\x3cselect id\x3d"swal-maritalStatus" \x3e\n\x3coption value\x3d""\x3eMarital status\x3c/option\x3e\n\x3coption value\x3d"Single"\x3eSingle\x3c/option\x3e\n\x3coption value\x3d"Married"\x3eMarried\x3c/option\x3e\n\x3coption value\x3d"Divorced"\x3eDivorced\x3c/option\x3e\n\x3coption value\x3d"Widowed"\x3eWidowed\x3c/option\x3e\n\x3coption value\x3d"relationship"\x3eIn a relationship\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cselect id\x3d"swal-menopause"\x3e\n\x3coption value\x3d""\x3eReproductive age\x3c/option\x3e\n\x3coption value\x3d"Pre_pubertal"\x3ePre pubertal\x3c/option\x3e\n\x3coption value\x3d"Pre_menopausal"\x3ePre menopausal\x3c/option\x3e\n\x3coption value\x3d"Peri_menopausal"\x3ePeri menopausal\x3c/option\x3e\n\x3coption value\x3d"Post_menopausal"\x3ePost menopausal\x3c/option\x3e\n\x3c/select\x3e\n\x3cinput id\x3d"swal-numDeliveries" type\x3d"number" placeholder\x3d"Number of deliveries"\x3e\n\x3cselect id\x3d"swal-defibulation" name\x3d"swal-defibulation"\x3e\n\x3coption value\x3d""\x3eDefibulation\x3c/option\x3e\n\x3coption value\x3d"in_labour"\x3eYes, in Labour\x3c/option\x3e\n\x3coption value\x3d"during_pregnancy"\x3eYes, during Pregnancy\x3c/option\x3e\n\x3coption value\x3d"outside_pregnancy"\x3eYes, outside of Pregnancy\x3c/option\x3e\n\x3coption value\x3d"outside_pregnancy"\x3eNo defibulation\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3cselect id\x3d"swal-reconstructiveSurgeryHistory" name\x3d"swal-reconstructiveSurgeryHistory"\x3e\n\x3coption value\x3d""\x3eReconstructive surgery\x3c/option\x3e\n\x3coption value\x3d"Yes"\x3eYes\x3c/option\x3e\n\x3coption value\x3d"No"\x3eNo\x3c/option\x3e\n\x3c/select\x3e\n\x3cselect id\x3d"swal-violence" name\x3d"swal-violence"\x3e\n\x3coption value\x3d""\x3eHistory of Violence\x3c/option\x3e\n\x3coption value\x3d"physical"\x3eYes, physical\x3c/option\x3e\n\x3coption value\x3d"sexual"\x3eYes, sexual\x3c/option\x3e\n\x3coption value\x3d"psychological"\x3eYes, psychological\x3c/option\x3e\n\x3coption value\x3d"several"\x3eYes, several type of violence\x3c/option\x3e\n\x3coption value\x3d"several"\x3eNo history of violence\x3c/option\x3e\n\x3c/select\x3e\n\x3cselect id\x3d"swal-support" name\x3d"swal-support"\x3e\n\x3coption value\x3d""\x3ePsychological/psychosexual support\x3c/option\x3e\n\x3coption value\x3d"Yes"\x3eYes\x3c/option\x3e\n\x3coption value\x3d"No"\x3eNo\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n\x3c/form\x3e',focusConfirm:!1,didOpen:()=>{Swal.getPopup().classList.add("swal-hug-popup-white");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");a&&(document.getElementById("swal-fgmPatientType").value=a);aa("swal-countryOrigin",!0,!0);const b=document.getElementById("swal-countryOrigin");b.addEventListener("change",()=>{let l=document.getElementById("swal-countryOrigin-other");b.value==="Other"?l||(l=document.createElement("input"),l.id="swal-countryOrigin-other",l.placeholder="Specify country",l.required=!0,b.parentNode.insertBefore(l,b.nextSibling)):l&&l.remove()});const g=document.getElementById("swal-ageAtFgm"),f=document.getElementById("swal-dontKnowAge");f.addEventListener("change",()=>{f.checked?(g.value="",g.disabled=!0,g.placeholder="999 (Don\u2019t know)"):(g.disabled=!1,g.placeholder="Age at FGM/C")})},preConfirm:()=>{var b=document.getElementById("swal-countryOrigin").value;if(b==="Other"&&(b=document.getElementById("swal-countryOrigin-other")?.value,!b))return Swal.showValidationMessage("Specify other country"),!1;const g=document.getElementById("swal-firstName").value,f=document.getElementById("swal-lastName").value,l=document.getElementById("swal-birthDate").value,h=document.getElementById("swal-fgmPatientType").value,k=document.getElementById("swal-fgmProfessionalType").value,n=document.getElementById("swal-religion").value,q=document.getElementById("swal-maritalStatus").value;var r=document.getElementById("swal-ageAtFgm").value;const t=document.getElementById("swal-dontKnowAge").checked,y=document.getElementById("swal-violence").value,D=document.getElementById("swal-defibulation").value,v=document.getElementById("swal-reconstructiveSurgeryHistory").value,z=document.getElementById("swal-numDeliveries").value,L=document.getElementById("swal-menopause").value,M=document.getElementById("swal-support").value;if(t)r="999";else if(!r||r.trim()==="")return Swal.showValidationMessage('Age at FGM/C is required (or check "Don\u2019t know / Cannot recall")'),!1;return g&&f&&l&&h&&k&&b?{firstName:g,lastName:f,birthDate:l,fgmPatientType:h,fgmProfessionalType:k,countryOrigin:b,religion:n,maritalStatus:q,ageAtFgm:r,violenceHistory:y,defibulationHistory:D,reconstructiveSurgeryHistory:v,numDeliveries:z,menopause:L,psychologicalSupport:M}:(Swal.showValidationMessage("Required fields are mandatory"),!1)}});if(e){if(!await p.clinician.get(1))throw Error("Clinician profile not found");const b=await ta(e.firstName,e.lastName,e.birthDate,e.countryOrigin,e.ageAtFgm?e.ageAtFgm:0),g=Date.now()+Math.random().toString(36).substring(2,7),f=(new Date).toISOString();await p.users.add({uniqueId:g,composedId:b,...e,createdAt:f,deleted:0,consentToSync:c});await G();E&&E.refresh();Swal.fire({title:"Success",text:"Patient added successfully.",confirmButtonText:"OK"})}else S(!0)}catch(e){console.error("Error in createUser:",e),Swal.fire("Error","Error creating the user.","error")}}async function xa(a){try{(await Swal.fire({title:"Are you sure?",text:"This action will mark the user as deleted (and indicate it in synchronization).",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"})).isConfirmed&&(await p.users.update(Number(a),{deleted:1}),await G(),E&&E.refresh(),Swal.fire("Success","User marked as deleted.","success"))}catch(c){console.error("Error in deleteUser:",c),Swal.fire("Error","Error deleting the user.","error")}}async function ba(a=1500){if(!navigator.onLine)return!1;try{const c=new AbortController,e=setTimeout(()=>c.abort(),a);await fetch("https://sn3d.unige.ch/fsatDB/sync.php",{method:"HEAD",mode:"no-cors",cache:"no-store",signal:c.signal});clearTimeout(e);return!0}catch(c){return!1}}async function za(){return(await p.config.get("sync"))?.value||null}async function ma(){try{if(await ba()){var a=await za();if(a){var c=await p.users.filter(n=>n.consentToSync===1).toArray(),e=c.filter(n=>n.deleted===0).length;if(e===0)Swal.fire("No data to synchronize","No patient records with consent are available for synchronization.","info");else if((await Swal.fire({title:"Confirm data transmission",html:`<p>You are about to send <strong>${e}</strong> patient record${e>1?"s":""} from this local device to the research team.</p><p><small>All transmitted data are anonymized and shared only with explicit consent.</small></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Send data",cancelButtonText:"Cancel",reverseButtons:!0,didOpen:()=>{Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast")}})).isConfirmed){var b=c.map(({firstName:n,lastName:q,email:r,...t})=>t),g=await p.clinician.get(1);if(g){var {firstName:f,lastName:l,email:h,...k}=g;(await fetch("https://sn3d.unige.ch/fsatDB/sync.php",{method:"POST",headers:{"Content-Type":"application/json","X-App-Context":`${a}`},body:JSON.stringify({users:b,clinician:k})})).ok?(Swal.fire("Success","The synchronization was completed successfully.","success"),await G()):Swal.fire("Error","The synchronization failed.","error")}else Swal.fire("Error","Clinician profile is missing.","error")}}else Swal.fire("Configuration required","Synchronization is not configured.","warning")}else Swal.fire("Offline","An internet connection is required to synchronize data.","warning")}catch(n){console.error("Error in syncUsers:",n),n.name==="TypeError"||n.name==="AbortError"||n.message?.includes("fetch")?Swal.fire("Offline","Unable to synchronize without an internet connection.","warning"):Swal.fire("Error","An unexpected error occurred during synchronization.","error")}}async function Aa(){let a=null;const c=(await Swal.fire({title:"Who are you ?",html:'\n\x3cdiv\x3e\n\x3cdiv class\x3d"grid"\x3e\n\x3ca id\x3d"professional-box"\x3e\n\x3carticle class\x3d"space-3"\x3e\n\x3cimg src\x3d"img/graphics/popup-fig-1.jpg" width\x3d"300" class\x3d"float"\x3e\n\x3cp\x3e \x3cb\x3eA healthcare professional\x3c/b\x3e\x3cbr\x3e Create a local account\x3c/p\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3ca id\x3d"patient-box"\x3e\n\x3carticle class\x3d"space-3"\x3e\n\x3cimg src\x3d"img/graphics/popup-fig-2.jpg" width\x3d"300" class\x3d"float"\x3e\n\x3cp\x3e\x3cb\x3eNot a healthcare professional\x3c/b\x3e\x3cbr\x3e Access the informative gallery \x3c/p\x3e\n\x3c/article\x3e\n\x3c/a\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n',showConfirmButton:!1,showCancelButton:!1,allowOutsideClick:!0,didOpen:()=>{Swal.getPopup().classList.add("swal-hug-popup");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");Swal.getConfirmButton().style.display="none";document.getElementById("patient-box").addEventListener("click",()=>{a="patient";Swal.clickConfirm()});document.getElementById("professional-box").addEventListener("click",()=>{a="professional";Swal.clickConfirm()});document.querySelectorAll("#patient-gallery a.watercolor-thumb").forEach((e,b)=>{e.classList.remove("aos-animate");e.setAttribute("data-aos-duration",350+b*100)})},preConfirm:()=>a?a:!1})).value;c==="patient"?(await Swal.fire({html:'\x3cdiv id\x3d"terms-of-use" style\x3d"Display:none;overflow-y:scroll;max-height:65vh"\x3e\n\x3ch1 class\x3d"center" id\x3d"terms-of-use"\x3eTerms of use\x3c/h1\x3e\n\x3chr\x3e\n\x3cdiv class\x3d"left" style\x3d"font-size:75%"\x3e\n\x3ch4\x3e1. Purpose of the Application\x3c/h4\x3e\n\x3cp\x3e\nThe tool is intended solely for information and self-assessment purposes. It does not provide a medical diagnosis and must not replace consultation with qualified healthcare professionals. Users are encouraged to seek appropriate medical advice for any health-related question or concern.\n\x3c/p\x3e\n\x3ch4\x3e2. Data Processing and Privacy\x3c/h4\x3e\n\x3cp\x3eAll data entered in the application are:\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3estored locally in the user\u2019s browser,\x3c/li\x3e\n\x3cli\x3enot transmitted to any external server without the user\u2019s explicit consent,\x3c/li\x3e\n\x3cli\x3eexportable by the user in CSV or Excel format with anonymous identifiers.\x3c/li\x3e\n\x3c/ul\x3e\n\x3cp\x3e\nData are only sent online to the university server if the user actively chooses to share their anonymised data for academic and research purposes. No identifiable personal information is collected by default.\n\x3c/p\x3e\n\x3ch4\x3e3. User Responsibilities\x3c/h4\x3e\n\x3cp\x3eUsers agree to:\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3euse the application in compliance with all applicable laws and ethical standards,\x3c/li\x3e\n\x3cli\x3erefrain from uploading or entering any identifying personal data,\x3c/li\x3e\n\x3cli\x3eunderstand the limitations of self-assessment and the necessity of professional medical evaluation.\x3c/li\x3e\n\x3c/ul\x3e\n\x3ch4\x3e4. Intellectual Property\x3c/h4\x3e\n\x3cp\x3e\nAll illustrations, interface components, and written content within the application are protected by copyright. Reproduction, distribution, or reuse of the artwork or other materials is prohibited without prior authorisation from the copyright holders.\n\x3c/p\x3e\n\x3ch4\x3e5. Disclaimer of Liability\x3c/h4\x3e\n\x3cp\x3e\nThe application is provided \u201cas is,\u201d without warranty of any kind. The developers, contributors, and affiliated institutions shall not be held responsible for:\n\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3eerrors or inaccuracies in the content,\x3c/li\x3e\n\x3cli\x3edecisions made based on information displayed in the application,\x3c/li\x3e\n\x3cli\x3eany technical issues or data loss resulting from the user\u2019s device or browser environment.\x3c/li\x3e\n\x3c/ul\x3e\n\x3ch4\x3e6. Updates and Modifications\x3c/h4\x3e\n\x3cp\x3e\nThe development team may update, modify, or discontinue features of the application at any time in order to improve its performance, ensure compliance, or enhance the user experience.\n\x3c/p\x3e\n\x3ch4\x3e7. Acceptance of Terms\x3c/h4\x3e\n\x3cp\x3e\nBy using this application, the user acknowledges having read, understood, and accepted these Terms of Use. Continued use of the application constitutes acceptance of any future updates to these terms.\n\x3c/p\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"warning" style\x3d"text-align: justify;"\x3e\x3cp\x3e\x3csmall\x3eYou are about to see watercolor illustrations of the vulva, with and without different forms of FGM/C. These images are not photographs. They are respectful artistic illustrations created for educational purposes.\x3c/small\x3e\x3c/p\x3e\n\x3cp\x3e\x3csmall\x3e\x3cb\x3eSome people may find this content emotionally sensitive.\x3c/b\x3e You may stop, pause, or leave the gallery at any time.\x3c/small\x3e\x3c/p\x3e\x3c/div\x3e',showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:'\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather"\x3e\x3cpolyline points\x3d"20 6 9 17 4 12"\x3e\x3c/polyline\x3e\x3c/svg\x3e \x3cspan\x3eI accept\x3c/span\x3e',cancelButtonText:'\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather"\x3e\x3cline x1\x3d"18" y1\x3d"6" x2\x3d"6" y2\x3d"18"\x3e\x3c/line\x3e\x3cline x1\x3d"6" y1\x3d"6" x2\x3d"18" y2\x3d"18"\x3e\x3c/line\x3e\x3c/svg\x3e \x3cspan\x3eGo back\x3c/span\x3e',didOpen:()=>{Swal.getPopup().classList.add("patient");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast")}})).isConfirmed&&(document.getElementById("start-view").style.display="none",S(!1)):c==="professional"&&await ua()}function na(){var a=document.getElementById("user-export-list");a=XLSX.utils.table_to_book(a,{sheet:"Patients"});XLSX.writeFile(a,"patients-"+Date.now()+".csv")}function oa(){var a=document.getElementById("user-export-list");a=XLSX.utils.table_to_book(a,{sheet:"Patients"});XLSX.writeFile(a,"patients-"+Date.now()+".xlsx")}function sa(){const a=x.querySelectorAll("a.watercolor-thumb");a[0].style.display="none";a[0].parentElement.style.maxWidth="100vmin";a[7].style.display="none";a[7].parentElement.style.maxWidth="100vmin";a.forEach(c=>{c.addEventListener("click",async e=>{if(c.dataset.type!=="Unknown"){e.preventDefault();e=c.getAttribute("data-type");var b=c.getAttribute("data-text"),g=c.querySelector("img").src,f="img/oms/"+e.slice(0,-1)+".jpg";await Swal.fire({html:`<div class="grid" style="padding:0"><section><img src="${g}" class="selected-img" alt="Selected image"></section><section><article class="left"><h3 style="margin-bottom:0.15em" class="space-yt-1">${e==="Unknown"?"I don't know":"TYPE : "+e}</h3><p style="margin:0">${b}</p><hr><div style="position:relative;" class="center"><button class="btn-compare contrast"><span>View annotated watercolor</span><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button><img class="compare-img collapsed" src=""><div class="legend" style="padding-top:1.75em"> <img src="${f}"><hr><p><small style="font-size:0.6em">WHO guideline on the prevention of female genital mutilation and clinical management of complications - 28 April 2025</small></p></div></div></article></section></div>`,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!0,didOpen:()=>{Swal.getPopup().classList.add("patient","watercolor-img");Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");Swal.getPopup().querySelector(".swal2-cancel").focus();const l=Swal.getPopup().querySelector(".compare-img");l.src=Swal.getPopup().querySelector(".selected-img").src.replace("gallery","gallery-l");Swal.getPopup().querySelector(".btn-compare").addEventListener("click",h=>{l.classList.toggle("collapsed");l.classList.contains("collapsed")?h.target.innerHTML='\x3cspan\x3eView annotated watercolor \x3c/span\x3e\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"css-i6dzq1"\x3e\x3cpath d\x3d"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"\x3e\x3c/path\x3e\x3ccircle cx\x3d"12" cy\x3d"12" r\x3d"3"\x3e\x3c/circle\x3e\x3c/svg\x3e':h.target.innerHTML='\x3cspan\x3eHide annotated watercolor \x3c/span\x3e\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"css-i6dzq1"\x3e\x3cpath d\x3d"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"\x3e\x3c/path\x3e\x3cline x1\x3d"1" y1\x3d"1" x2\x3d"23" y2\x3d"23"\x3e\x3c/line\x3e\x3c/svg\x3e';Swal.getPopup().querySelector(".legend").classList.toggle("collapsed")})}})}})})}function qa(){Swal.fire({html:'\n\x3cdiv class\x3d"left space-3"\x3e\n\x3cp\x3e\x3csmall\x3eMany women and individuals with FGM/C have not received clear or understandable information about their bodies. Some may not have the words to describe their anatomy or experiences. This gallery aims to:\x3c/small\x3e\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3csmall\x3eProvide clear and accurate information using WHO classification\x3c/small\x3e\x3c/li\x3e\n\x3cli\x3e\x3csmall\x3eSupport self-understanding and recognition\x3c/small\x3e\x3c/li\x3e\n\x3cli\x3e\x3csmall\x3eEncourage respectful and informed communication with healthcare professionals, if desired\x3c/small\x3e\x3c/li\x3e\n\x3c/ul\x3e\n\x3cp\x3e\x3csmall\x3eThere is no \u201cright\u201d or \u201cwrong\u201d way to experience this information\x3c/small\x3e\x3c/p\x3e\n\x3c/div\x3e'})}function ra(){Swal.fire({html:'\n\x3cdiv class\x3d"left space-3"\x3e\n\x3cp\x3e\x3csmall\x3eThese images are not photographs. They are respectful artistic illustrations created for educational purposes. The illustrations are intended to:\x3c/small\x3e\x3c/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3csmall\x3eSupport understanding of bodily differences\x3c/small\x3e\x3c/li\x3e\n\x3cli\x3e\x3csmall\x3eHelp with personal recognition and naming\x3c/small\x3e\x3c/li\x3e\n\x3cli\x3e\x3csmall\x3eMake it easier to talk with a healthcare professional, if you choose to do so\x3c/small\x3e\x3c/li\x3e\n\x3c/ul\x3e\n\x3cp\x3e\x3csmall\x3eYou are not required to share your experience with anyone unless you wish to.\x3c/small\x3e\x3c/p\x3e\n\x3c/div\x3e'})}async function ja(){if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"))Swal.fire({title:"Already installed",text:"FSAT is already running as a native-like app on this device.",icon:"success",confirmButtonText:"OK"});else if(A)Swal.fire({title:"Install FSAT",html:"The application will be added locally on your device.\x3cbr\x3eIt will then appear like an application and also work offline.",icon:"info",showCancelButton:!0,confirmButtonText:"Install now",cancelButtonText:"Maybe later"}).then(e=>{e.isConfirmed&&(A.prompt(),A.userChoice.then(b=>{b.outcome==="accepted"?Swal.fire("Success!","FSAT is now an application on your device.","success"):Swal.fire("Installation cancelled","","info");A=null}))});else{var a=navigator.userAgent.toLowerCase(),c="";c=/iphone|ipad|ipod/.test(a)&&!window.MSStream?'\n\x3cp\x3eThis browser does not support automatic installation.\x3c/p\x3e\n\x3cp\x3e\x3cstrong\x3eOn Safari (iPhone/iPad):\x3c/strong\x3e\x3c/p\x3e\n\x3col style\x3d"text-align:left"\x3e\n\x3cli\x3eTap the \x3cstrong\x3eShare button\x3c/strong\x3e (square with upward arrow) at the bottom\x3c/li\x3e\n\x3cli\x3eSelect \x3cstrong\x3eAdd to Home Screen\x3c/strong\x3e\x3c/li\x3e\n\x3c/ol\x3e\n\x3cp\x3eThe FSAT icon will appear on your home screen and will work offline.\x3c/p\x3e\n':/android/.test(a)?'\n\x3cp\x3eThis browser does not support automatic installation.\x3c/p\x3e\n\x3cp\x3e\x3cstrong\x3eOn Android:\x3c/strong\x3e\x3c/p\x3e\n\x3col style\x3d"text-align:left"\x3e\n\x3cli\x3eTap the menu \x3cstrong\x3e\u22ee\x3c/strong\x3e in the address bar\x3c/li\x3e\n\x3cli\x3eChoose \x3cstrong\x3eInstall app\x3c/strong\x3e or \x3cstrong\x3eAdd to Home screen\x3c/strong\x3e\x3c/li\x3e\n\x3c/ol\x3e\n':'\n\x3cp\x3eThis browser does not support automatic installation.\x3c/p\x3e\n\x3cp\x3e\x3cstrong\x3eOn desktop:\x3c/strong\x3e\x3c/p\x3e\n\x3cul style\x3d"text-align:left"\x3e\n\x3cli\x3e\x3cstrong\x3eChrome / Edge:\x3c/strong\x3e Click the \x3cstrong\x3e+\x3c/strong\x3e icon or \u201cInstall FSAT\u201d in the address bar\x3c/li\x3e\n\x3cli\x3e\x3cstrong\x3eFirefox:\x3c/strong\x3e Menu \u2192 Install the application\x3c/li\x3e\n\x3c/ul\x3e\n';Swal.fire({title:"Manual installation",html:c,icon:"info",confirmButtonText:"OK"})}}async function ka(){if((await Swal.fire({title:"Delete your account ?",html:'\x3cdiv class\x3d"left"\x3eThis action \x3cstrong\x3ewill permanently delete\x3c/strong\x3e :\x3cbr\x3e\x3cul\x3e\x3cli\x3eYour account profil\x3c/li\x3e\x3cli\x3eAll patients saved on this device.\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e',icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",confirmButtonColor:"tomato",cancelButtonText:"Cancel",didOpen:()=>{Swal.getPopup().querySelector(".swal2-cancel").classList.add("contrast");Swal.getPopup().querySelector(".swal2-confirm").classList.add("tomato")}})).isConfirmed)try{await p.delete(),await Swal.fire({title:"Database removed from this device",text:"All local data has been deleted.",icon:"success"}),window.location.reload(!0)}catch(a){console.error(a),Swal.fire("Erreur","Impossible to delete the local database.","error")}}function la(){u.innerHTML="";u.classList.add("inactive");document.body.classList.remove("fade-white");S(!0);document.getElementById("patient-info").style.display="none";const a=document.getElementById("patient-gallery");a.classList.remove("plain-section");a.querySelectorAll("a.watercolor-thumb").forEach(c=>{c.classList.add("aos-animate");c.setAttribute("data-aos-mirror","false");c.setAttribute("data-aos-once","true");c.removeEventListener("click",ca);c.addEventListener("click",ca)});AOS.refreshHard()}async function ca(a){a.preventDefault();const c=a.currentTarget.getAttribute("data-type");var e=a.currentTarget.getAttribute("data-text");a=a.currentTarget.querySelector("img").src;const b=c==="No scar"?"img/oms/NM.jpg":`img/oms/${c.slice(0,-1)}.jpg`;(await Swal.fire({html:`<div class="grid" style="padding:0"><section style="padding: 4px;"><img src="${a}" class="selected-img" alt="Selected image"></section><article><p class="justify space-yt-1" style="${c==="Unknown"?"display:none":""}"><b>${c==="Unknown"?"I don't know":c}:</b> ${e}</p><hr><p><b class="space-y-2">${c==="Unknown"?"None of the previous drawings correspond, or I don't know.":"Does this drawing correspond most closely to your anatomy ?"}</b></p><div class="space-x-2 clamp-4" style="margin:auto"><div class="grid"><button id="btn-confirm" class="btn-confirm">\u2714 Yes, select</button><button id="btn-cancel" class="btn-cancel contrast">\u2716 No, choose another</button></div></div><hr><details style="${c==="Unknown"?"display:none":""}"><summary>More information</summary><img src="${b}" style="width:auto;max-height:32vh"><p class="space-x-2"><small style="font-size:0.6em">World Health Organization - (28 April 2025)</small></p></details><hr style="${c==="Unknown"?"display:none":""}"></article></div>`,showConfirmButton:!1,showCancelButton:!1,confirmButtonText:'\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather"\x3e\x3cpolyline points\x3d"20 6 9 17 4 12"\x3e\x3c/polyline\x3e\x3c/svg\x3e\x3cbr class\x3d"no-phone"\x3eYes, select',cancelButtonText:'\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather"\x3e\x3cline x1\x3d"18" y1\x3d"6" x2\x3d"6" y2\x3d"18"\x3e\x3c/line\x3e\x3cline x1\x3d"6" y1\x3d"6" x2\x3d"18" y2\x3d"18"\x3e\x3c/line\x3e\x3c/svg\x3e \x3cbr class\x3d"no-phone"\x3e No, choose another ',didOpen:()=>{Swal.getPopup().classList.add("watercolor-img","patient");Swal.getPopup().querySelector("#btn-confirm").addEventListener("click",()=>{Swal.close({isConfirmed:!0})});Swal.getPopup().querySelector("#btn-cancel").addEventListener("click",()=>{Swal.close({isDismissed:!0})});Swal.getPopup().querySelector("#btn-cancel").focus()}})).isConfirmed&&(await Swal.fire({title:"Thank you for your response",html:'\n\x3carticle class\x3d"space-2 left clamp-4" style\x3d"margin:auto"\x3e\n\x3cfieldset\x3e\n\x3clabel\x3e\n\x3cinput type\x3d"checkbox" id\x3d"swal-consent" name\x3d"consent" checked /\x3e I consent to the anonymous storage of my sociodemographic data for health research purposes only, in accordance with applicable local regulations\n\x3c/label\x3e\n\x3ci\x3eUncheck this box if you do not consent.\x3c/i\x3e\n\x3c/fieldset\x3e\n\x3c/article\x3e\n\x3cdiv class\x3d"clamp-4 left space-yt-2" style\x3d"margin:auto"\x3e\n\x3cb\x3eYou can now return the device to your healthcare professional.\x3c/b\x3e\n\x3c/div\x3e\n\x3cp class\x3d"center"\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather thumb-3"\x3e\x3cpolyline points\x3d"9 10 4 15 9 20"\x3e\x3c/polyline\x3e\x3cpath d\x3d"M20 4v7a4 4 0 0 1-4 4H4"\x3e\x3c/path\x3e\x3c/svg\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"feather thumb-3"\x3e\x3crect x\x3d"2" y\x3d"3" width\x3d"20" height\x3d"14" rx\x3d"2" ry\x3d"2"\x3e\x3c/rect\x3e\x3cline x1\x3d"8" y1\x3d"21" x2\x3d"16" y2\x3d"21"\x3e\x3c/line\x3e\x3cline x1\x3d"12" y1\x3d"17" x2\x3d"12" y2\x3d"21"\x3e\x3c/line\x3e\x3c/svg\x3e\n\x3c/p\x3e',showConfirmButton:!0,showCloseButton:!1,allowOutsideClick:!1,confirmButtonText:"Continue as a healthcare professional",didOpen:()=>{Swal.getPopup().classList.add("swal-hug-popup-white")}})).isConfirmed&&(e=(e=document.getElementById("swal-consent"))?e.checked:!1,Z(),J(),ya(c,e===!0?1:0))}function T(){var a=Math.min(window.screen.width,window.screen.height);a>=600&&a<=1200&&((a=window.innerHeight>window.innerWidth)&&!Swal.isVisible()&&Swal.fire({html:'\n\x3cdiv style\x3d"font-size:1.2em; margin:1em auto 0.5rem auto"\x3e\nFor the best experience, please rotate your device to \x3cb\x3elandscape mode\x3c/b\x3e.\n\x3c/div\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"48" height\x3d"48" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"css-i6dzq1"\x3e\x3cpolyline points\x3d"23 4 23 10 17 10"\x3e\x3c/polyline\x3e\x3cpath d\x3d"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"\x3e\x3c/path\x3e\x3c/svg\x3e\n',showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0}),!a&&Swal.isVisible()&&Swal.close())}function pa(){async function a(f){c&&(c.destroy(),c=null);const l=document.getElementById("fsat-data").getContext("2d");var h=await p.users.where("deleted").equals(0).toArray();if(h.length===0)c=new Chart(l,{type:"bar",data:{labels:["No Data"],datasets:[{label:"Patients",data:[0]}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}});else{switch(f){case "countries":const n={};h.forEach(d=>{d=d.countryOrigin||"Unknown";n[d]=(n[d]||0)+1});f=Object.keys(n);h=Object.values(n);var k={type:"pie",data:{labels:f,datasets:[{data:h,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"]}]},options:{responsive:!0}};break;case "currentAges":const q="0-5 6-10 11-15 16-20 21-40 41-60 61+ Unknown".split(" "),r=Array(q.length).fill(0);h.forEach(d=>{if(d.birthDate){var m=new Date;d=new Date(d.birthDate);let w=m.getFullYear()-d.getFullYear();const da=m.getMonth()-d.getMonth();(da<0||da===0&&m.getDate()<d.getDate())&&w--;m=w;m<=5?r[0]++:m<=10?r[1]++:m<=15?r[2]++:m<=20?r[3]++:m<=40?r[4]++:m<=60?r[5]++:r[6]++}else r[q.indexOf("Unknown")]++});f=q;k={type:"bar",data:{labels:f,datasets:[{label:"Current Age",data:r,backgroundColor:"rgba(153, 102, 255, 0.6)"}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "fgmAges":f="Less than 1 year;1\u20134 years;5\u20139 years;10\u201314 years;15 years or older;Don\u2019t know / Cannot recall".split(";");const t=Array(f.length).fill(0);h.forEach(d=>{d=d.ageAtFgm;d==null?t[5]++:d<1?t[0]++:d<=4?t[1]++:d<=9?t[2]++:d<=14?t[3]++:t[4]++});k={type:"bar",data:{labels:f,datasets:[{label:"Age at FGM/C",data:t,backgroundColor:"rgba(255, 99, 132, 0.6)"}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "violenceHistory":const y={physical:0,sexual:0,psychological:0,several:0,"No history":0,Unknown:0};h.forEach(d=>{d=d.violenceHistory||"Unknown";d in y?y[d]++:y.Unknown++});f=Object.keys(y).map(d=>d==="several"?"Several types":d.replace("No history","No history of violence"));h=Object.values(y);k={type:"doughnut",data:{labels:f,datasets:[{data:h,backgroundColor:"#FF6384 #36A2EB #FFCE56 #4BC0C0 #9966FF #FF9F40".split(" ")}]},options:{responsive:!0}};break;case "menopause":const D={Pre_pubertal:0,Pre_menopausal:0,Peri_menopausal:0,Post_menopausal:0,Unknown:0};h.forEach(d=>{d=d.menopause||"Unknown";D[d]=(D[d]||0)+1});f=Object.keys(D);h=Object.values(D);k={type:"pie",data:{labels:f,datasets:[{data:h,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"]}]},options:{responsive:!0}};break;case "numDeliveries":const v={0:0,"1-2":0,"3-4":0,"5+":0,Unknown:0};h.forEach(d=>{d=d.numDeliveries;d==null?v.Unknown++:d===0?v["0"]++:d<=2?v["1-2"]++:d<=4?v["3-4"]++:v["5+"]++});f=Object.keys(v);h=Object.values(v);k={type:"bar",data:{labels:f,datasets:[{label:"# of Patients by Number of Deliveries",data:h,backgroundColor:"rgba(54, 162, 235, 0.6)"}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "fgmTypes":const z="Ia;Ib;IIa;IIb;IIc;IIIa;IIIb;IV;No scar;Unknown".split(";"),L=Array(z.length).fill(0),M=Array(z.length).fill(0);h.forEach(d=>{var m=d.fgmProfessionalType||"Unknown";d=z.indexOf(d.fgmPatientType||"Unknown");m=z.indexOf(m);d!==-1&&L[d]++;m!==-1&&M[m]++});f=z;k={type:"bar",data:{labels:f,datasets:[{label:"Patient-Reported",data:L,backgroundColor:"rgba(75, 192, 192, 0.6)"},{label:"Professional Assessment",data:M,backgroundColor:"rgba(255, 159, 64, 0.6)"}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "religion":const N={Christianity:0,Islam:0,Judaism:0,Buddhism:0,Sikhism:0,Other:0,None:0,Undisclosed:0,Unknown:0};h.forEach(d=>{d=d.religion||"Unknown";N[d]=(N[d]||0)+1});k={type:"pie",data:{labels:Object.keys(N),datasets:[{data:Object.values(N)}]},options:{responsive:!0}};break;case "maritalStatus":const O={Single:0,Married:0,Divorced:0,Widowed:0,relationship:0,Unknown:0};h.forEach(d=>{d=d.maritalStatus||"Unknown";O[d]=(O[d]||0)+1});k={type:"bar",data:{labels:Object.keys(O),datasets:[{label:"Marital status",data:Object.values(O)}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "defibulation":const P={in_labour:0,during_pregnancy:0,outside_pregnancy:0,"No defibulation":0,Unknown:0};h.forEach(d=>{d=d.defibulation||"Unknown";P[d]=(P[d]||0)+1});k={type:"doughnut",data:{labels:Object.keys(P),datasets:[{data:Object.values(P)}]}};break;case "reconstructiveSurgery":const U={Yes:0,No:0,Unknown:0};h.forEach(d=>{U[d.reconstructiveSurgeryHistory||"Unknown"]++});k={type:"pie",data:{labels:Object.keys(U),datasets:[{data:Object.values(U)}]}};break;case "support":const V={Yes:0,No:0,Unknown:0};h.forEach(d=>{V[d.support||"Unknown"]++});k={type:"bar",data:{labels:Object.keys(V),datasets:[{label:"Psychological support",data:Object.values(V)}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "fgmTypeByAgeAtFgm":const W="Ia;Ib;IIa;IIb;IIc;IIIa;IIIb;IV;No scar;Unknown".split(";"),ea="\x3c1 1\u20134 5\u20139 10\u201314 15+ Unknown".split(" "),Q={};W.forEach(d=>{Q[d]=Array(ea.length).fill(0)});h.forEach(d=>{const m=d.fgmProfessionalType||"Unknown";let w=5;d.ageAtFgm!=null&&(w=d.ageAtFgm<1?0:d.ageAtFgm<=4?1:d.ageAtFgm<=9?2:d.ageAtFgm<=14?3:4);Q[m]&&Q[m][w]++});k={type:"bar",data:{labels:W,datasets:ea.map((d,m)=>({label:`Age at FGM: ${d}`,data:W.map(w=>Q[w][m])}))},options:{scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "fgmConcordance":const H={Concordant:0,Discordant:0,Unknown:0};h.forEach(d=>{d.fgmPatientType&&d.fgmProfessionalType?d.fgmPatientType===d.fgmProfessionalType?H.Concordant++:H.Discordant++:H.Unknown++});k={type:"bar",data:{labels:Object.keys(H),datasets:[{label:"FGM/C concordance",data:Object.values(H)}]},options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}};break;case "fgmTypeByCountry":const X="Ia;Ib;IIa;IIb;IIc;IIIa;IIIb;IV;No scar;Unknown".split(";"),I={};h.forEach(d=>{d=d.countryOrigin||"Unknown";I[d]=(I[d]||0)+1});let B=f=Object.keys(I).sort((d,m)=>I[m]-I[d]);f.length>7&&(B=f.slice(0,6),B.push("Other"));const Y={};X.forEach(d=>{Y[d]=Array(B.length).fill(0)});h.forEach(d=>{const m=d.fgmProfessionalType||"Unknown";d=B.indexOf(d.countryOrigin||"Unknown");d===-1&&B.includes("Other")&&(d=B.indexOf("Other"));d!==-1&&Y[m][d]++});k={type:"bar",data:{labels:X,datasets:B.map((d,m)=>({label:d,data:X.map(w=>Y[w][m])}))},options:{scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{position:"top"}}}}}c=new Chart(l,k)}}let c=null;const e=document.querySelector("#clinician-view .plain-section .container \x3e div"),b=document.createElement("div");b.innerHTML='\n\x3cdiv\x3e\n\x3cdiv class\x3d"space-y-2 data-buttons"\x3e\n\x3cbutton class\x3d"outline" data-chart\x3d"fgmTypes"\x3eFGM types\x3c/button\x3e\n\x3cbutton class\x3d"outline" data-chart\x3d"countries"\x3eCountries\x3c/button\x3e\n\x3cbutton class\x3d"outline" data-chart\x3d"currentAges"\x3eCurrent Ages\x3c/button\x3e\n\x3cbutton class\x3d"outline" data-chart\x3d"fgmAges"\x3eAges at FGM\x3c/button\x3e\n\x3c/div\x3e\n\x3cselect class\x3d"clamp-4" id\x3d"chart-selector"\x3e\n\x3coption value\x3d""\x3eMore data\x3c/option\x3e\n\x3coption value\x3d"violenceHistory"\x3eViolence history\x3c/option\x3e\n\x3coption value\x3d"menopause"\x3eMenopause\x3c/option\x3e\n\x3coption value\x3d"numDeliveries"\x3eDeliveries\x3c/option\x3e\n\x3coption value\x3d"religion"\x3eReligion\x3c/option\x3e\n\x3coption value\x3d"maritalStatus"\x3eMarital status\x3c/option\x3e\n\x3coption value\x3d"defibulation"\x3eDefibulation\x3c/option\x3e\n\x3coption value\x3d"reconstructiveSurgery"\x3eReconstructive surgery\x3c/option\x3e\n\x3coption value\x3d"support"\x3ePsychological support\x3c/option\x3e\n\x3coption value\x3d"fgmTypeByAgeAtFgm"\x3eFGM type \u00d7 age at FGM\x3c/option\x3e\n\x3coption value\x3d"fgmConcordance"\x3eFGM type concordance\x3c/option\x3e\n\x3coption value\x3d"fgmTypeByCountry"\x3eFGM type \u00d7 country\x3c/option\x3e\n\x3c/select\x3e\n\x3c/div\x3e\n';b.querySelectorAll("button[data-chart]").forEach(f=>{f.addEventListener("click",()=>{a(f.dataset.chart)})});const g=b.querySelector("#chart-selector");g.addEventListener("change",()=>{g.value&&(a(g.value),g.value="")});e.insertBefore(b,e.querySelector("canvas"));a("fgmTypes");return{refresh:(f="fgmTypes")=>a(f)}}const u=document.getElementById("clinician-view"),x=document.getElementById("patient-view");let E;const p=new Dexie("DB_HUG_FSAT");p.version(12).stores({config:"key",clinician:"id, firstName, lastName, profession, age, institution, country, email, passwordHash, securityType, securityHash",users:"++id, uniqueId, composedId, lastName, firstName, birthDate, fgmPatientType, fgmProfessionalType, countryOrigin, religion, maritalStatus, ageAtFgm, violenceHistory, psychologicalSupport, defibulationHistory, reconstructiveSurgeryHistory, numDeliveries, menopause, createdAt, deleted, consentToSync"}).upgrade(a=>{a.table("users").toCollection().modify(c=>{c.deleted=c.deleted===!0?1:0;c.consentToSync=c.consentToSync===!1?0:1})});let A=null;window.addEventListener("beforeinstallprompt",a=>{a.preventDefault();A=a});window.addEventListener("appinstalled",()=>{A=null});document.querySelectorAll(".start-btn").forEach(a=>a.addEventListener("click",Aa));window.addEventListener("online",K);window.addEventListener("offline",K);window.addEventListener("load",T);window.addEventListener("resize",T);window.addEventListener("orientationchange",T);"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js?v\x3d60",{scope:"/"}).then(a=>{setTimeout(()=>{a&&a.active&&a.update().catch(()=>{})},5E3);a.addEventListener("updatefound",()=>{const c=a.installing;c.addEventListener("statechange",()=>{c.state==="installed"&&navigator.serviceWorker.controller&&Swal.fire({icon:"info",title:"Update available",text:"A new version of the app is available. Refresh to apply?",showCancelButton:!0,confirmButtonText:"Refresh",cancelButtonText:"Later"}).then(e=>{e.isConfirmed&&window.location.reload()})})})}).catch(a=>console.error("SW Error:",a))}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}));window.addEventListener("beforeinstallprompt",a=>{a.preventDefault();A=a});const Ba=a=>Array.from(document.querySelectorAll(a)),Ca=()=>{var a=document.querySelector(".dark-mode-toggler");a&&(a.insertAdjacentHTML("afterbegin",'\n\x3cinput type\x3d"checkbox" id\x3d"darkmode"\x3e\n\x3clabel for\x3d"darkmode" class\x3d"toggle"\x3e\n\x3cspan\x3eToggle dark mode\x3c/span\x3e\n\x3c/label\x3e\n'),a=a.querySelector("#darkmode"),document.documentElement.dataset.theme=a.checked?"dark":"light",a.addEventListener("change",c=>{document.documentElement.dataset.theme=c.target.checked?"dark":"light"}))},Da=(a,c)=>{const e=Array.from(document.querySelectorAll(`.auto-list > section:nth-of-type(${c+1}) > h2`)),b=a.querySelector(`details:nth-of-type(${c+1}) > ul`);e.forEach(g=>{const f=g.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");g.id=f;b.insertAdjacentHTML("beforeend",`<li><a href="#${f}" data-target="${f}">${g.textContent}</a></li>`)})},Ea=a=>(c,e)=>{const b=c.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");c.id=b;a.insertAdjacentHTML("beforeend",`<details><summary><a href="#${b}" data-target="${b}">${c.textContent}</a></summary><ul></ul></details>`);Da(a,e)},Fa=a=>{Array.from(document.querySelectorAll(".auto-list \x3e h1")).forEach(Ea(a))},fa=a=>{const c=Array.from(document.querySelectorAll(".auto-list \x3e h1 + section, .auto-list \x3e h1"));if(c.length!==0){var e=Ba([`.auto-list > h1#${a} + section`,`.auto-list > h1#${a}`,`.auto-list > h1 + section:has(#${a})`,`.auto-list > h1:has(+ section > #${a})`].join(", "));c.forEach(b=>{var g=!e.includes(b);b.classList.toggle("collapsed",g)})}},ha=a=>{Array.from(document.querySelectorAll(".auto-complete \x3e details")).forEach(c=>{c.removeAttribute("open")});(a=document.querySelector(`[data-target="${a}"]`)?.closest("details"))&&a.setAttribute("open",!0)},Ga=()=>{const a=document.querySelector(".auto-list \x3e h1:first-of-type")?.id||"",c=window.location.hash?window.location.hash.substring(1):a;fa(c);ha(c);window.addEventListener("hashchange",()=>{const e=window.location.hash?window.location.hash.substring(1):a;fa(e);ha(e)})},Ha=()=>{const a=document.createElement("ul");a.classList.add("burger-menu-overlay");a.insertAdjacentHTML("afterbegin","\x3cli\x3e\x3ca class\x3d'burger-close'\x3e\x3csvg viewBox\x3d'0 0 24 24' width\x3d'24' height\x3d'24' stroke\x3d'currentColor' stroke-width\x3d'2' fill\x3d'none' stroke-linecap\x3d'round' stroke-linejoin\x3d'round' class\x3d'feather'\x3e\x3cline x1\x3d'18' y1\x3d'6' x2\x3d'6' y2\x3d'18'\x3e\x3c/line\x3e\x3cline x1\x3d'6' y1\x3d'6' x2\x3d'18' y2\x3d'18'\x3e\x3c/line\x3e\x3c/svg\x3e\x3c/a\x3e\x3c/li\x3e");return a},Ia=()=>{const a=Array.from(document.querySelectorAll("body \x3e .container header nav \x3e ul:not(:first-of-type) \x3e li:not(.separator, .dark-mode-toggler)"));if(a.length!==0){a.forEach(e=>{e.classList.contains("burger-menu")||e.classList.add("phone-burger-menu")});var c=document.querySelector(".burger-menu-overlay");c||(c=Ha(),Array.from(document.querySelectorAll(".burger-menu, .phone-burger-menu")).forEach(e=>{const b=e.cloneNode(!0);b.querySelector("a").addEventListener("click",()=>{e.querySelector("a").click();c.classList.toggle("open")});c.append(b)}),document.querySelector("header").append(c));a[0].parentElement.children[0].children[0].classList.contains("burger-icon")||a[0].insertAdjacentHTML("beforebegin",'\n\x3cli\x3e\n\x3ca class\x3d\'burger-icon\'\x3e\n\x3csvg viewBox\x3d"0 0 24 24" width\x3d"24" height\x3d"24" stroke\x3d"currentColor" stroke-width\x3d"2" fill\x3d"none" stroke-linecap\x3d"round" stroke-linejoin\x3d"round" class\x3d"thumb-1"\x3e\x3cline x1\x3d"3" y1\x3d"12" x2\x3d"21" y2\x3d"12"\x3e\x3c/line\x3e\x3cline x1\x3d"3" y1\x3d"6" x2\x3d"21" y2\x3d"6"\x3e\x3c/line\x3e\x3cline x1\x3d"3" y1\x3d"18" x2\x3d"21" y2\x3d"18"\x3e\x3c/line\x3e\x3c/svg\x3e\n\x3c/a\x3e\n\x3c/li\x3e\n');Array.from(document.querySelectorAll("header .burger-icon, header .burger-close")).forEach(e=>{e.addEventListener("click",()=>{document.querySelector("header .burger-menu-overlay").classList.toggle("open")})})}},Ja=()=>{const a=document.querySelector(".breadcrumb"),c=document.querySelector("body \x3e .container .container.grid \x3e aside");a&&((new IntersectionObserver(([e])=>{const b=e.intersectionRatio<1;e.target.classList.toggle("sticky",b);c&&c.classList.toggle("sticky",b)},{threshold:[1]})).observe(a),a.children[0].insertAdjacentHTML("beforeend","\x3cli class\x3d'breadcrumb-burger-menu'\x3e\x3csvg viewBox\x3d'0 0 24 24' width\x3d'24' height\x3d'24' stroke\x3d'currentColor' stroke-width\x3d'2' fill\x3d'none' stroke-linecap\x3d'round' stroke-linejoin\x3d'round' class\x3d'thumb-1'\x3e\x3cline x1\x3d'3' y1\x3d'12' x2\x3d'21' y2\x3d'12'\x3e\x3c/line\x3e\x3cline x1\x3d'3' y1\x3d'6' x2\x3d'21' y2\x3d'6'\x3e\x3c/line\x3e\x3cline x1\x3d'3' y1\x3d'18' x2\x3d'21' y2\x3d'18'\x3e\x3c/line\x3e\x3c/svg\x3e"),document.querySelector(".breadcrumb-burger-menu").addEventListener("click",()=>{c.classList.toggle("open")}));c&&Array.from(document.querySelectorAll("aside li \x3e a")).forEach(e=>{e.addEventListener("click",()=>c.classList.toggle("open"))})};let C=null;const ia=a=>{const c=window.innerWidth-document.documentElement.clientWidth;c&&document.documentElement.style.setProperty("--pico-scrollbar-width",`${c}px`);document.documentElement.classList.add("modal-is-open","modal-is-opening");setTimeout(()=>{C=a;document.documentElement.classList.remove("modal-is-opening")},400);a.showModal();a.querySelector("button[rel\x3d'prev']").blur()},R=a=>{C=null;document.documentElement.classList.add("modal-is-closing");setTimeout(()=>{document.documentElement.classList.remove("modal-is-closing","modal-is-open");document.documentElement.style.removeProperty("--pico-scrollbar-width");a.close()},400)},Ka=a=>{a.previousElementSibling?.addEventListener("click",c=>{c.preventDefault();a&&(a.open?R(a):ia(a))});a.querySelector("button[rel\x3d'prev']")?.addEventListener("click",c=>{c.preventDefault();a&&(a.open?R(a):ia(a))})},La=()=>{document.addEventListener("click",a=>{C&&(C.querySelector("article").contains(a.target)||R(C))});document.addEventListener("keydown",a=>{a.key==="Escape"&&C&&R(C)})},Ma=()=>{const a=Array.from(document.querySelectorAll("dialog"));a.length!==0&&(a.forEach(c=>{var e=c.querySelector("header");if(!e){e=document.createElement("header");e.insertAdjacentHTML("afterbegin","\x3cbutton aria-label\x3d'close' rel\x3d'prev'\x3e\x3c/button\x3e");c.prepend(e);const b=c.querySelector("h1, h2, h3, hgroup");b&&(b.parentNode.insertBefore(e,b),e.appendChild(b))}e=c.querySelector("article");if(!e){for(e=document.createElement("article");c.firstChild;)e.appendChild(c.firstChild);c.appendChild(e)}Ka(c)}),La())};document.addEventListener("DOMContentLoaded",()=>{Ca();{const a=Array.from(document.querySelectorAll("nav.auto-complete"));a.length!==0&&a.forEach(Fa)}Ga();Ia();Ja();Ma();typeof AOS!=="undefined"&&AOS.init()})})();
